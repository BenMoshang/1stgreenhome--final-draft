@use 'sass:math';
@use '../base/globals' as globals;
@use '../spacing/margins' as margins;
@use '../spacing/variables' as spacing-vars;

/* =============================================================================
 * TYPOGRAPHY 2.1
 * Placeholder-driven typography system using golden ratio scale
 * ============================================================================= */

/* ----------------- 1. HELPER MIXINS ----------------- */
@mixin type-scale($size, $spacing, $line-height: null, $weight: 400) {
  @if $line-height != null {
    @include margins.adjust-to($line-height);
  }

  font-size: globals.round-to($size);
  font-weight: $weight;
  letter-spacing: $spacing;
  line-height: globals.round-to(if($line-height, $line-height, globals.$MAJOR-HALF));
}

/* ----------------- 2. PLACEHOLDERS ----------------- */
/**
 * Typography Scale System
 * ----------------------
 * Golden ratio (φ ≈ 1.618) based type system:
 * - Display: Scaled up from 'lg' using φ powers
 * - Body: Based on 'md' (1em)
 * - Small: Scaled down using φ reciprocal (MINOR)
 */
 %font-family--primary {
  font-family: 'Poppins', system-ui, sans-serif;
}
 %font-family--secondary {
  font-family: 'Manrope', system-ui, sans-serif;
}
/* Display elements (largest) */
%u_display-1 {
  @extend %font-family--primary;
  @include type-scale(globals.size('xl'), -0.022em);
}
%u_display-1--bold {
  @extend %font-family--primary;

  @extend %u_display-1;
  font-weight: 700;
}

%u_display-2 {
  @extend %font-family--primary;

  @include type-scale(globals.size('lg') * globals.$MAJOR-HALF, -0.022em);
}
%u_display-2--bold {
  @extend %font-family--primary;

  @extend %u_display-2;
  font-weight: 700;
}

/* Title hierarchy */
%u_title-a {
  @extend %font-family--primary;
  @include type-scale(globals.size('lg') * globals.$MAJOR-QUARTER, -0.022em);
}
%u_title-a--bold {
  @extend %font-family--primary;

  @extend %u_title-a;
  font-weight: 700;
}

%u_title-b {
  @extend %font-family--primary;

  @include type-scale(globals.size('lg'), -0.02em);
}

%u_title-c {
  @extend %font-family--primary;

  @include type-scale(
    math.div(globals.size('lg'), globals.$MAJOR-HALF),
    -0.017em
  );
}

/* Heading elements */
%u_heading {
  @extend %font-family--primary;

  @include type-scale(
    globals.size('md') * globals.$MAJOR-QUARTER,
    -0.014em,
    null,
    600
  );
}
%u_heading--bold {
  @extend %font-family--primary;

  @extend %u_heading;
  font-weight: 700;
}

%u_subheading {
  @extend %font-family--primary;

  @include type-scale(
    math.div(globals.size('md'), globals.$MAJOR-QUARTER),
    -0.007em
  );
}

/* Body text */
%u_paragraph {
  @extend %font-family--secondary;

  @include type-scale(
    globals.size('md'),
    -0.011em,
    globals.$MAJOR
  );
}

%u_callout {
  @extend %font-family--secondary;

  @include type-scale(
    math.div(globals.size('md'), globals.$MAJOR-EIGHT),
    -0.009em
  );
}

/* Small text elements */
%u_label {
  @extend %font-family--secondary;

  @include type-scale(
    math.div(
      math.div(globals.size('md'), globals.$MAJOR-QUARTER),
      globals.$MAJOR-EIGHT
    ),
    -0.004em,
    null,
    600
  );
}
%u_label--bold {
  @extend %font-family--secondary;

  @extend %u_label;
  font-weight: 700;
}

%u_caption {
  @extend %font-family--secondary;

  @include type-scale(
    math.div(globals.size('md'), globals.$MAJOR-HALF),
    -0.007em
  );
}

%u_overline {
  @extend %font-family--secondary;

  @include type-scale(
    math.div(
      math.div(globals.size('md'), globals.$MAJOR-QUARTER),
      globals.$MAJOR-EIGHT
    ),
    1em * math.div(globals.$MINOR, 10)
  );
  text-transform: uppercase;
}

/* ----------------- 3. ROOT BASELINE ----------------- */
:root {
  @include margins.adjust-to(globals.$MAJOR-HALF);
  
  /* Base font setup with golden ratio line-height */
  font:
    #{globals.round-to(globals.size('md'))} /
    #{globals.round-to(globals.$MAJOR-HALF)} 

}

/* ----------------- 4. UTILITY CLASSES ----------------- */
.u_display-1 { @extend %u_display-1;
 }
.u_display-1--bold { @extend %u_display-1--bold; }
.u_display-2 { @extend %u_display-2; }
.u_display-2--bold { @extend %u_display-2--bold; }
.u_title-a { @extend %u_title-a; }
.u_title-a--bold { @extend %u_title-a--bold; }
.u_title-b { @extend %u_title-b; }
.u_title-c { @extend %u_title-c; }
.u_heading { @extend %u_heading; }
.u_heading--bold { @extend %u_heading--bold; }
.u_subheading { @extend %u_subheading; }
.u_paragraph { @extend %u_paragraph; }
.u_callout { @extend %u_callout; }
.u_label { @extend %u_label; }
.u_label--bold { @extend %u_label--bold; }
.u_caption { @extend %u_caption; }
.u_overline { @extend %u_overline; }

/* ----------------- 5. RESPONSIVE TYPOGRAPHY ----------------- */
/**
 * Mobile-first approach scales typography proportionally 
 * using golden ratio at each breakpoint
 */

/* Small tablets / large phones (≥480px) */
@media (width >= 30rem) {
  .u_display-1 {
    font-size: globals.round-to(globals.size('xl') * globals.$MAJOR-HALF);
  }

  .u_display-2 {
    font-size: globals.round-to(globals.size('xl') * globals.$MAJOR-HALF);
  }

  .u_title-a {
    font-size: globals.round-to(globals.size('lg') * globals.$MAJOR-HALF);
  }
}

/* Tablets and larger (≥768px) */
@media (width >= 48rem) {
  .u_display-1 {
    @include type-scale(
      globals.size('2xl'),
      -0.022em, 
      globals.$MAJOR-QUARTER
    );
  }
}
