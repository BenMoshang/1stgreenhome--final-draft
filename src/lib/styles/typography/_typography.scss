@use 'sass:math';
@use '../base/globals' as globals;
@use '../spacing/margins' as margins;

/* =============================================================================
 * TYPOGRAPHY 2.1
 * Placeholder-driven typography system using golden ratio scale
 * ============================================================================= */

/* ----------------- 1. HELPER MIXINS ----------------- */
@mixin type-scale($size, $spacing, $line-height: null, $weight: 400) {
  @if $line-height != null {
    @include margins.adjust-to($line-height);
  }

  font-size: globals.round-to($size);
  font-weight: $weight;
  letter-spacing: $spacing;
  line-height: globals.round-to(if($line-height, $line-height, globals.$MAJOR-HALF));
}

/* ----------------- 2. PLACEHOLDERS ----------------- */
/**
 * Typography Scale System
 * ----------------------
 * Golden ratio (φ ≈ 1.618) based type system:
 * - Display: Scaled up from 'lg' using φ powers
 * - Body: Based on 'md' (1em)
 * - Small: Scaled down using φ reciprocal (MINOR)
 */
 %font-family--primary {
  font-family: 'Outfit', system-ui;
}
 %font-family--secondary {
  font-family: 'Manrope', system-ui;
}

%text-wrap--balance{
text-wrap: balance;
}
%text-wrap--pretty{
text-wrap: pretty;
}
/* Display elements (largest) */
%u_display-1 {
  @extend %font-family--primary;
  @include type-scale(globals.size('xl'), -0.022em, globals.$MAJOR-HALF);
  @extend %text-wrap--balance;
}
%u_display-1--bold {
  @extend %font-family--primary;
  @extend %text-wrap--balance;

  @extend %u_display-1;
  font-weight: 700;
}

%u_display-2 {
  @extend %font-family--primary;
  @extend %text-wrap--balance;

  @include type-scale(globals.size('lg') * globals.$MAJOR-HALF, -0.022em, globals.$MAJOR-HALF);
}
%u_display-2--bold {
  @extend %font-family--primary;
  @extend %text-wrap--balance;

  @extend %u_display-2;
  font-weight: 700;
}

/* Title hierarchy */
%u_title-a {
  @extend %font-family--primary;
  @extend %text-wrap--balance;

  @include type-scale(globals.size('lg') * globals.$MAJOR-QUARTER, -0.022em, globals.$MAJOR-HALF);
}
%u_title-a--bold {
  @extend %text-wrap--balance;
  @extend %font-family--primary;

  @extend %u_title-a;
  font-weight: 700;
}

%u_title-b {
  @extend %font-family--primary;
  @extend %text-wrap--balance;


  @include type-scale(globals.size('lg'), -0.02em, globals.$MAJOR-HALF);
}

%u_title-c {
  @extend %font-family--primary;
  @extend %text-wrap--balance;

  @include type-scale(
    math.div(globals.size('lg'), globals.$MAJOR-HALF),
    -0.017em,
    globals.$MAJOR-HALF
  );
}

/* Heading elements */
%u_heading {
  @extend %text-wrap--balance;

  @extend %font-family--primary;

  @include type-scale(
    globals.size('md') * globals.$MAJOR-QUARTER,
    -0.014em,
    globals.$MAJOR-HALF,
    600
  );
}
%u_heading--bold {
  @extend %font-family--primary;
  @extend %text-wrap--balance;

  @extend %u_heading;
  font-weight: 700;
}

%u_subheading {
  @extend %font-family--primary;
  @extend %text-wrap--balance;

  @include type-scale(
    math.div(globals.size('md'), globals.$MAJOR-QUARTER),
    -0.007em,
    globals.$MAJOR-HALF
  );
}

/* Body text */
%u_paragraph {
  @extend %font-family--secondary;
  @extend %text-wrap--pretty;

  @include type-scale(
    globals.size('md'),
    -0.011em,
    globals.$MAJOR
  );
}

%u_callout {
  @extend %font-family--secondary;
  @extend %text-wrap--pretty;

  @include type-scale(
    math.div(globals.size('md'), globals.$MAJOR-EIGHT),
    -0.009em,
    globals.$MAJOR-HALF
  );
}

/* Small text elements */
%u_label {
  @extend %font-family--secondary;
  @extend %text-wrap--pretty;

  @include type-scale(
    math.div(
      math.div(globals.size('md'), globals.$MAJOR-QUARTER),
      globals.$MAJOR-EIGHT
    ),
    -0.004em,
    globals.$MAJOR-HALF,
    600
  );
}
%u_label--bold {
  @extend %font-family--secondary;

  @extend %u_label;
  font-weight: 700;
}

%u_caption {
  @extend %font-family--secondary;

  @include type-scale(
    math.div(globals.size('md'), globals.$MAJOR-HALF),
    -0.007em,
    globals.$MAJOR-HALF
  );
}

%u_overline {
  @extend %font-family--secondary;

  @include type-scale(
    math.div(
      math.div(globals.size('md'), globals.$MAJOR-QUARTER),
      globals.$MAJOR-EIGHT
    ),
    1em * math.div(globals.$MINOR, 10),
    globals.$MAJOR-HALF
  );
  text-transform: uppercase;
}

/* ----------------- 3. ROOT BASELINE ----------------- */
:root {
  @include margins.adjust-to(globals.$MAJOR-HALF);
  
  /* Base font setup with golden ratio line-height */
  font:
    #{globals.round-to(globals.size('md'))} /
    #{globals.round-to(globals.$MAJOR-HALF)} 

}

/* ----------------- 4. UTILITY CLASSES ----------------- */
$typography-list: display-1, display-1--bold, display-2, display-2--bold, title-a, title-a--bold, title-b, title-c, heading, heading--bold, subheading, paragraph, callout, label, label--bold, caption, overline;
@each $name in $typography-list {
  .u_#{$name} {
    @extend %u_#{$name};
  }
}

/* ----------------- 5. RESPONSIVE TYPOGRAPHY ----------------- */
/**
 * Mobile-first approach scales typography proportionally 
 * using golden ratio at each breakpoint
 */

/* Small tablets / large phones (≥480px) */
@media (width >= 30rem) {
  .u_display-1 {
    font-size: globals.round-to(globals.size('xl') * globals.$MAJOR-HALF);
  }

  .u_display-2 {
    font-size: globals.round-to(globals.size('xl') * globals.$MAJOR-HALF);
  }

  .u_title-a {
    font-size: globals.round-to(globals.size('lg') * globals.$MAJOR-HALF);
  }
}

/* Tablets and larger (≥768px) */
@media (width >= 48rem) {
  .u_display-1 {
    @include type-scale(
      globals.size('2xl'),
      -0.022em, 
      globals.$MAJOR-QUARTER
    );
  }
}
