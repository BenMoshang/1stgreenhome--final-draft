@use 'sass:math';
@use '../base/globals' as globals;
@use '../spacing/margins' as margins;
@use '../spacing/variables' as spacing-vars;

/* =============================================================================
 * TYPOGRAPHY 2.1
 * Placeholder-driven typography system using golden ratio scale
 * ============================================================================= */

/* ----------------- 1. HELPER MIXINS ----------------- */
@mixin type-scale($size, $spacing, $line-height: null, $weight: 400) {
  @if $line-height != null {
    @include margins.adjust-to($line-height);
  }

  font-size: globals.round-to($size);
  font-weight: $weight;
  letter-spacing: $spacing;
  line-height: globals.round-to(if($line-height, $line-height, globals.$MAJOR-HALF));
}

/* ----------------- 2. PLACEHOLDERS ----------------- */
/**
 * Typography Scale System
 * ----------------------
 * Golden ratio (φ ≈ 1.618) based type system:
 * - Display: Scaled up from 'lg' using φ powers
 * - Body: Based on 'md' (1em)
 * - Small: Scaled down using φ reciprocal (MINOR)
 */

/* Display elements (largest) */
%display-1 {
  @include type-scale(globals.size('xl'), -0.022em);
}
%display-1--bold {
  @extend %display-1;
  font-weight: 700;
}

%display-2 {
  @include type-scale(globals.size('lg') * globals.$MAJOR-HALF, -0.022em);
}
%display-2--bold {
  @extend %display-2;
  font-weight: 700;
}

/* Title hierarchy */
%title-a {
  @include type-scale(globals.size('lg') * globals.$MAJOR-QUARTER, -0.022em);
}
%title-a--bold {
  @extend %title-a;
  font-weight: 700;
}

%title-b {
  @include type-scale(globals.size('lg'), -0.02em);
}

%title-c {
  @include type-scale(
    math.div(globals.size('lg'), globals.$MAJOR-HALF),
    -0.017em
  );
}

/* Heading elements */
%heading {
  @include type-scale(
    globals.size('md') * globals.$MAJOR-QUARTER,
    -0.014em,
    null,
    600
  );
}
%heading--bold {
  @extend %heading;
  font-weight: 700;
}

%subheading {
  @include type-scale(
    math.div(globals.size('md'), globals.$MAJOR-QUARTER),
    -0.007em
  );
}

/* Body text */
%body {
  @include type-scale(
    globals.size('md'),
    -0.011em,
    globals.$MAJOR
  );
}

%callout {
  @include type-scale(
    math.div(globals.size('md'), globals.$MAJOR-EIGHT),
    -0.009em
  );
}

/* Small text elements */
%label {
  @include type-scale(
    math.div(
      math.div(globals.size('md'), globals.$MAJOR-QUARTER),
      globals.$MAJOR-EIGHT
    ),
    -0.004em,
    null,
    600
  );
}
%label--bold {
  @extend %label;
  font-weight: 700;
}

%caption {
  @include type-scale(
    math.div(globals.size('md'), globals.$MAJOR-HALF),
    -0.007em
  );
}

%overline {
  @include type-scale(
    math.div(
      math.div(globals.size('md'), globals.$MAJOR-QUARTER),
      globals.$MAJOR-EIGHT
    ),
    1em * math.div(globals.$MINOR, 10)
  );
  text-transform: uppercase;
}

/* ----------------- 3. ROOT BASELINE ----------------- */
:root {
  @include margins.adjust-to(globals.$MAJOR-HALF);
  
  /* Base font setup with golden ratio line-height */
  font:
    #{globals.round-to(globals.size('md'))} /
    #{globals.round-to(globals.$MAJOR-HALF)} 'Inter',
    'Segoe UI',
    'Helvetica Neue',
    'Arial',
    sans-serif;
}

/* ----------------- 4. UTILITY CLASSES ----------------- */
.display-1 { @extend %display-1; }
.display-1--bold { @extend %display-1--bold; }
.display-2 { @extend %display-2; }
.display-2--bold { @extend %display-2--bold; }
.title-a { @extend %title-a; }
.title-a--bold { @extend %title-a--bold; }
.title-b { @extend %title-b; }
.title-c { @extend %title-c; }
.heading { @extend %heading; }
.heading--bold { @extend %heading--bold; }
.subheading { @extend %subheading; }
.body { @extend %body; }
.callout { @extend %callout; }
.label { @extend %label; }
.label--bold { @extend %label--bold; }
.caption { @extend %caption; }
.overline { @extend %overline; }

/* ----------------- 5. RESPONSIVE TYPOGRAPHY ----------------- */
/**
 * Mobile-first approach scales typography proportionally 
 * using golden ratio at each breakpoint
 */

/* Small tablets / large phones (≥480px) */
@media (width >= 30rem) {
  .display-1 {
    font-size: globals.round-to(globals.size('xl') * globals.$MAJOR-HALF);
  }

  .display-2 {
    font-size: globals.round-to(globals.size('xl') * globals.$MAJOR-HALF);
  }

  .title-a {
    font-size: globals.round-to(globals.size('lg') * globals.$MAJOR-HALF);
  }
}

/* Tablets and larger (≥768px) */
@media (width >= 48rem) {
  .display-1 {
    @include type-scale(
      globals.size('2xl'),
      -0.022em, 
      globals.$MAJOR-QUARTER
    );
  }
}
